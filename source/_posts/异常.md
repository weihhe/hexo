title: 进程异常 退出
author: weihehe
tags:
  - 进程
  - 异常
categories:
  - 操作系统
date: 2024-07-09 10:48:00
---
C语言中退出码和异常处理
<!--more-->

## 进程运行完毕后

1. 代码运行完毕，结果正确。
2. 代码运行完毕，结果错误。
3. **代码异常终止**，程序没有跑完，没有执行到return，那此时通常视**退出码没有意义**，此时有意义的是**为什么会发生异常**。


### 退出码

进程的退出码，用于表征运行结果是否正确。

- 一般使用`return 0`来代表`运行成功`。而用其他的数字来表示不同的推出原因。

- 在`bash`中，可以**使用`echo $?`来获得最近一次进程退出时候的退出码**。

- **系统接口**，`strerror(error_num)`将错误码转化为字符串类型的字符信息。

### errno

头文件:`error.h`

- `errno`一个全局变量，保存的是最近一次执行的错误码。

### 异常

进程**出现异常**，本质上是我们的进程收到了对应的信号。

*例如：（使用kill -l 可以查看信号，如果kill -signal + pid 可以让对应的进程中断并显示异常信息。）*

## exit(`退出码`)和return(`退出码`)

- `exit`是一个库函数

- **`return`在`main`函数()中代码进程结束，在其他函数中只代表当前函数返回**。

- **`exit()`在任何函数中都代表进程退出**。

- `exit`结束后，会执行用户定义的清理函数，刷新**用户**缓冲区，关闭流等最后再调用`_exit()`。

## `_exit()`

- 是一个系统调用接口，逻辑和`exit`相似，但**看不到用户缓冲区**。