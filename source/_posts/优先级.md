title: 进程优先级
author: weihehe
tags:
  - 优先级
  - 调度器
categories:
  - 操作系统
date: 2024-07-13 12:45:00
---
易忘的知识点解释和操作
<!--more-->
## 操作和解释

`ps - l`：查看当前终端的进程优先级
- `PRI`字段（priority）
- `NI`字段，进程优先级的修正数据。
- `UID`：执行者的身份ID。
- `PID`: 进程代号ID。
- `PRI`：代表被执行的优先级，值越小越早执行。**PRl(new)=PRl(默认old值为80)+nice,因此可以更改`NI`来修改进程优先级**
	- top [r]...
	- nice

## 进程优先级
- 优先级：由于**资源的稀缺性**，决定进程**存在访问资源的先后问题**，因此进程之间具有**竞争关系**。

- 权限：决定**能或者不能**。

- 进程饥饿:一个进程长时间不能被调度。

- 配置进程优先权，可能会改善系统性能，也可以将某些进程，安排到某个CPU上...。

### 调度器

即**计算机中分配工作所需资源的方法**。为了保障进程的相对公平，linux对用户更改优先级的范围进行了调整。即`NICE`的值为 **[-20,19]**

**调整需要管理员权限**

## 如何根据优先级开展调度？

`运行队列`采用了两个二级指针，分别指两个指针数组。并且可以用`位图`的方式，来记录某个`PRI`值对应的队列是否为空。
这种方式也叫做linux内核的`O（1）`调度算法。

正在被调度的进程，按照图中正在处理。

![调度器分配图](/images/调度器分配图.png)

新添加的进程，则也根据`PRI`，保存到`*waiting[]`相应的位置。(`*runing[]` 和 `*waiting[]`的存储逻辑是相同的)等到 **`*runing[]`处理完毕之后，`swap（**run,**wait）`，让新添加的进程被调度**。


由于PRI较低的在头部，优先被遍历，故优先被执行。