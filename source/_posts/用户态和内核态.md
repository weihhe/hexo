title: '用户态和内核态 时钟中断 '
author: weihehe
tags:
  - 进程
  - 内存
  - 时钟
categories:
  - 操作系统
date: 2024-07-24 18:01:00
---

关于进程地址空间的用户态和内核态
<!--more-->

## 页表性质
![用户态和内核态](/images/用户态-页表.png)

- 对于**用户页表**来说，有几个进程，就有几份**用户级页表**。

- 但**内核页表只有一份，由所有进程共享**。这意味着，我们可以在任何一个进程中执行我们操作系统的代码。

## 操作系统

操作系统的本质：本质是一个死循环，(for(;;))通过**时钟中断和调度**机制，管理和协调计算机硬件资源。

- 计算机硬件中有一个时钟芯片，它会每隔很短的时间向CPU发送时钟中断信号。

- 操作系统接收到时钟中断后，会暂停当前正在运行的任务，保存其状态，并决定接下来执行哪个任务（通常是通过调度算法）。

- 这个调度过程确保了系统中的多个任务能够被公平地执行，同时也使得操作系统能够响应和处理各种硬件和软件事件。

## cs寄存器

内部存有标志位，其中`cs`的低两位为`0（b00）`那么就是**内核态**，为`3(b11)`就是**用户态**。

## 内核态和用户态切换

**内核态**：允许访问操作系统的代码和数据。

**用户态**：只能访问用户自己的代码和数据。

![状态切换](/images/用户态-核切换.png)
