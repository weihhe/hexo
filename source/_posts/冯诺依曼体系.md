title: 冯·诺依曼体系  一切皆文件
author: weihehe
tags:
  - 冯·诺依曼
categories:
  - 操作系统
date: 2024-06-30 10:07:00
---
基本组成和概念理解
<!-- more -->

## 基本组成

![冯诺伊曼结构](/images/冯诺伊曼结构.png)

- 这里的存储器指的是内存。

- 不考虑缓存情况，这里的CPU能且只能对内存进行读写，不能访问外设。(输入或输出设备)

- 外设(输入或输出设备)要输入或者输出数据，也只能写入内存或者从内存中读取。

-  设备之间都是**独立的个体**。

## 联系

所有的设备通过数据交互，而数据通过`线`传递的**高（1）低（0）电平**来传递。即充放电的过程。

对于`32`位计算机，它具有`32`根地址总线和数据总线。每根总线只有`0`和`1`。

- 地址总线：可以访问的地址空间宽度。*例如：在32位机器中，地址总线排列组合形成的地址范围是`[0,2^32byte]`,共4GB，给他安装4G以上内存是没有意义的*

- 数据总线：主要用于在CPU 和内存之间往返传输需要处理或存储的数据。


## 定义
-  操作系统 ——一款进行管理（硬件，软件）的软件。
	- 与硬件交互，管理所有的软硬件资源
	- 为用户程序（应用程序）提供一个良好的执行环境
    
![操作系统层级图](/images/冯诺依曼进程.png)

## Linux中，一切皆文件怎么理解？


1. 我们在linux中几乎所有的操作都是进程。

2. 冯·诺依曼体系，我们使用的设备绝大多数都是外设，例如键盘和显示器。

3. 操作系统需要把**硬件资源管理**起来，并且要支持和硬件进行交互（即需要有对应的**方法**）。所以Linux内核提供了一种数据结构
——`struct operation_func{}`(也像文件一样被封装在`struct_file`中)将每一个硬件设备的方法都以**函数指针**的形式保存在`struct operation_func{}`当中。

因此，一个设备想要被系统访问，需要向系统的文件对象（`struct_file`）中的`operation_func{}`提供一个函数指针集。

## VFS——虚拟文件系统

由于`struct_file`用这样的方式达到我们使用类似**访问文件**的方式访问了**外设**，因此我们把这种技术称为**虚拟文件系统**。


## 参考资料

- [维基百科](https://zh.wikipedia.org/zh-hans/%E5%86%AF%E8%AF%BA%E4%BC%8A%E6%9B%BC%E7%BB%93%E6%9E%84)