title: Vulkan基础
author: weihehe
date: 2025-04-10 16:35:39
tags:
---
## Vulkan

### 什么是Vulkan

- 一种高性能的跨平台图形和计算 API。

## 运行所需环境

- Vulkan SDK

- GLM:用于OpenGL的数学库，也适用于Vulkan

- GLFW:帮助你轻松创建窗口，获取键鼠输入

- stb_image.h:用于读取贴图，支持bmp、tga、png、jpeg、hdr等常见格式



## 如何绘制一个三角形？

1. 硬件选择

	- 应用程序是通过 `VkInstance` 来使用 `Vulkan API` 的。

2. 创建逻辑设备和队列族

	- 我们需要使用更详细的 `VkPhysicalDevice` 特性 (比如多视口，64 位浮点) 来创建一个逻辑设备 `VkDevice`,`Vulkan`将诸如绘制指令、内存操作提交到`VkQueue `中，进行异步执行。
	
   - 每个队列族支持一个特定操作集合。
   - **支持 Vulkan 的显卡设备，支持所有队列操作。因此队列族可以作为选择设备的一个标准**
   
3. 窗口和交换链

	- 一般来说，我们需要创建窗口来显示渲染的图像，窗口渲染需要两个组件，窗口表面 (VkSurfaceKHR)和交换链 (VkSwapChainKHR),它们属于 Vulkan 扩展。

	- 交换链：交换链是一个渲染目标集合。它可以保证我们正在渲染的图像和当前屏幕图像是两个不同的图像。
    
4. 图像视图和帧缓冲

	- 从交换列中获得到图像之后，还不可以直接在图像上进行绘制，需要将图像先封装进`VkImageView`和`VkFramebuffer`当中。

5. 渲染流程

	- 描述了渲染操作使用的图像类型，图像的使用方式，图像的内容如何处理。
    
6. 图形管线

	- Vulkan的图形管线可以通过VkPipeline对象建立。

### 操作步骤：

1. 创建一个VkInstance。
2. 选择一个支持Vulkan的图形设备。(VkPhysicalDevice)
3. 为绘制和显示操作创建VkDevice和VkQueue。
4. 创建一个窗口，窗口表面和交换链。
5. 将交换链图像包装进VkImageView。
6. 创建一个渲染层指定渲染目标和使用方式。
7. 为渲染层创建帧缓冲。
8. 配置图形管线。
9. 为每一个交换链图像分配指令缓冲。
10. 从交换链获取图像进行绘制操作，提交图像对应的指令缓冲，返回图像到交换链。

